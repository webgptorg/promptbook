### üìñ Book Format- Added a federated servers dropdown to the header in Agents Server. The dropdown lists all federated servers, with the current server shown as selected and not clickable. Navigation is DRY and uses shared logic with the footer.- Allow changing agent URL if agentName in URL differs from derived agentName.  
  - Shows highlighted "Update URL" in Agent menu if discrepancy exists, with confirmation dialog and redirect.

-   Horizontal lines (`---`) now end commitments
    -   Allows separating metadata/configuration from conversation flow
    -   Supports various horizontal line formats: `---`, `-----`, `- - -`, `___`, `***`
-   Implement `USE BROWSER` commitment to enable browser tool capability
    -   Indicates that the agent should utilize a web browser tool to access and retrieve up-to-date information from the internet
    -   Content following `USE BROWSER` is ignored (similar to `NOTE`)
    -   First commitment in the `USE` family (future: `USE SEARCH ENGINE`, `USE FILE SYSTEM`, `USE MCP`)
    -   Stores `useBrowser: true` and `tools: ['browser']` in agent metadata
-   Implement `USE SEARCH ENGINE` commitment to enable search engine tool capability
    -   Indicates that the agent should utilize a search engine tool to access and retrieve up-to-date information from the internet
    -   Content following `USE SEARCH ENGINE` is ignored (similar to `NOTE`)
    -   Part of the `USE` family of commitments
    -   Stores `useSearchEngine: true` and `tools: ['search-engine']` in agent metadata
-   Implement `USE MCP` commitment to connect agent to MCP servers
    -   Allows specifying an MCP server URL which the agent will connect to for retrieving additional instructions and actions
    -   Content following `USE MCP` is the URL of the MCP server
    -   Part of the `USE` family of commitments
    -   Stores the server URL in `mcpServers` list in agent model requirements
-   Implement `META FONT` commitment to set the agent's font
    -   Allows setting custom font family for the agent page
    -   Dynamically loads fonts from Google Fonts
-   Update `META COLOR` commitment to support multiple colors
    -   Allows specifying multiple colors separated by comma (e.g., `#FF5733, #33FF57`)
    -   Used to create a gradient background on the agent page
-   Allow both comma and space separators in `META COLOR` and `META FONT` commitments
    -   Example: `META COLOR red, blue, green` and `META COLOR red blue green` now work the same
    -   Example: `META FONT Arial, sans-serif` and `META FONT Arial sans-serif` now work the same

### üêá Agents Server

-   Preserve `headless` GET param across all internal navigation (Header, Footer, router navigation). Uses DRY utility and custom Link component for consistent behavior.
-   List federated servers in footer (DRY, merged via layout.tsx)
-   Simplify agent page design (`/agents/[agentName]`)
    -   New visually appealing profile view with agent's color theme as gradient background
    -   Added noisy texture to the background for better visual appeal
    -   Restored quick access links to agent capabilities (Edit Book, Integration, History)
    -   Large rounded card with agent image (or initial letter fallback)
    -   Poppins font for agent name display
    -   Prominent "Start Chat" button
    -   All secondary actions (standalone chat, edit book, integration, etc.) moved to dropdown "More options" menu
    -   QR code available via modal dialog from options menu
    -   Admin-only menu items for chat history, feedback, clone, and export
    -   Replaced "Start Chat" button with an interactive `<Chat/>` component
        -   Displays the agent's initial message
        -   Allows users to send a message directly from the profile
        -   Seamlessly redirects to the full chat page with the message automatically sent
-   Support `META FONT` on agent page
    -   Agent page now uses the font specified in `META FONT` commitment for agent name and other text
-   Support multiple colors in `META COLOR` on agent page
    -   Agent page background now uses a gradient of all colors specified in `META COLOR`
-   Add `/models` endpoint to OpenAI-compatible API (`/agents/[agentName]/api/openai/v1/models`)
    -   Required for OpenAI-compatible clients (Jan, LM Studio, etc.) to discover available models
-   Fix OpenAI API compatibility route (`/agents/[agentName]/api/openai/v1`) to use server's API keys instead of BYOK (Bring Your Own Keys) strategy
    -   Moved OpenAI API compatible endpoints to versioned path `/agents/[agentName]/api/openai/v1` (e.g., `/agents/[agentName]/api/openai/v1/chat/completions`)
    -   The route now uses the same `OpenAiAssistantExecutionTools` as the web chat interface
-   Fix `OpenAiAssistantExecutionTools` to always include current user message in thread
    -   Previously, when a thread was provided (even empty), the current message was ignored
    -   Now the current message is always appended to the thread messages
-   Load federated agents dynamically after page load to improve performance
    -   Add `ExternalAgentsSectionClient` component
    -   Add `/api/federated-agents` endpoint to list federated servers
    -   Fetch agents from each federated server independently in parallel
    -   Show loading spinner for each server while fetching
    -   Enable CORS on `/api/agents` to allow direct browser calls
-   Implement `FROM` commitment to inherit agent source from another agent
    -   Allows inheriting from both internal and external agents
-   Implement `COMPONENT` commitment to define UI components that the agent can render in the chat
    -   Allows defining component name and syntax/usage description
-   Implement `OPEN` and `CLOSED` commitments to control agent learning
    -   `OPEN` (default) allows agent to learn from conversation and modify its source
    -   `CLOSED` prevents agent from being modified by conversation
-   Support standalone `USE BROWSER` and `CLOSED` commitments
    -   These commitments can now be used without any following content (e.g., just `USE BROWSER` on a line)
    -   This improves readability and consistency in agent source files
-   Implement `LANGUAGE` commitment to specify the language(s) the agent should use in its responses

### üîí Security

-   Update `next` to `15.4.8` and `react` to `19.1.2` to fix CVE-2025-55182
