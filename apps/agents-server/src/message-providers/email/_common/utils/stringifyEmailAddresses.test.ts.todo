import { describe, expect, it } from '@jest/globals';
import { stringifyEmailAddresses } from './stringifyEmailAddresses';

describe('how stringifyEmailAddresses works', () => {
    it('should work with single email', () => {
        expect(
            stringifyEmailAddresses([
                {
                    fullName: null,
                    baseEmail: 'pavol@webgpt.cz',
                    fullEmail: 'pavol@webgpt.cz',
                    plus: [],
                },
            ]),
        ).toEqual('pavol@webgpt.cz');
    });

    it('should work with simple emails', () => {
        expect(
            stringifyEmailAddresses([
                {
                    fullName: null,
                    baseEmail: 'pavol@webgpt.cz',
                    fullEmail: 'pavol@webgpt.cz',
                    plus: [],
                },
                {
                    fullName: null,
                    baseEmail: 'jirka@webgpt.cz',
                    fullEmail: 'jirka@webgpt.cz',
                    plus: [],
                },
                {
                    fullName: null,
                    baseEmail: 'tomas@webgpt.cz',
                    fullEmail: 'tomas@webgpt.cz',
                    plus: [],
                },
            ]),
        ).toEqual('pavol@webgpt.cz, jirka@webgpt.cz, tomas@webgpt.cz');
    });

    it('should work with fullname', () => {
        expect(
            stringifyEmailAddresses([
                {
                    fullName: 'Pavol Hejn칳',
                    baseEmail: 'pavol@webgpt.cz',
                    fullEmail: 'pavol@webgpt.cz',
                    plus: [],
                },
                {
                    fullName: 'Ji콏칤 Jahn',
                    baseEmail: 'jirka@webgpt.cz',
                    fullEmail: 'jirka@webgpt.cz',
                    plus: [],
                },
                {
                    fullName: 'Tom치코 Studen칤k',
                    baseEmail: 'tomas@webgpt.cz',
                    fullEmail: 'tomas@webgpt.cz',
                    plus: [],
                },
            ]),
        ).toEqual('"Pavol Hejn칳" <pavol@webgpt.cz>, "Ji콏칤 Jahn" <jirka@webgpt.cz>, "Tom치코 Studen칤k" <tomas@webgpt.cz>');
    });

    // TODO: [游쬫 Implement and test here escaping
});


/**
 * TODO: [游냚] This test fails because of aliased imports `import type { string_emails } from '@promptbook-local/types';`, fix it
 */
